{% extends "base.html" %}

{% block title %}
{{ album|album_meta("title", settings) }} - {{ index_title }}
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ 'css/lightgallery-bundle.min.css'|static_url(album) }}" />
{% endblock %}

{% block body %}
<div id="gallery">
  <div class="pure-g">
    <div class="pure-u-1 album-title">
      <h1>{{ album|album_meta("title", settings) }}</h1>
      {% if album.author %}
      <p class="album-author">{{ album.author }}</p>
      {% endif %}

      {% if album|album_meta("description", settings) %}
        {{ album|album_meta("description", settings)|safe }}
      {% endif %}
    </div>
  </div>

  {# Only this section is different from photojournal, so refactor it? #}
  {# also the same as the album list, so refactor? #}
  <div class="pure-g">
    {% for media in album.medias %}
    <div class="pure-u-1 pure-u-sm-{{ album|get_setting("photocardsmfrac", "1-2", settings) }} pure-u-md-{{ album|get_setting("photocardmdfrac", "1-3", settings) }} pure-u-lg-{{ album|get_setting("photocardlgfrac", "1-4", settings) }}">
      <div class="photo-card">
        <h1>{{ media.title }}</h1>
        <div class="img">
          <a href="{{ media.url }}" data-sub-html="#caption-{{ media.src_filename.split(".")[0] }}" title="{{ media.title }}">
            <img src="{{ media.thumbnail }}">
          </a>
        </div>
        <div id="caption-{{ media.src_filename.split(".")[0] }}">
          {% if media.description %}
            {{ media.description }}
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="pure-g">
    <div class="pure-u-1">
      <p style="text-align: center;">
        <a href="..">Go back</a>
        {% if album.zip %}
        <br>
        <a href="{{ album.zip }}">
          ⭳ Download all ⭳
        </a>
        {% endif %}
      </p>
    </div>
  </div>
</div>

<script src="{{ 'js/lightgallery.min.js'|static_url(album) }}"></script>
<script>
  lightGallery(document.getElementById("gallery"), {
    selector: ".img a",
  });
</script>
{% endblock %}